<app-jaar-totalen [leden]="this.leden"></app-jaar-totalen>
<app-uitbetalen-ddwv-crew-editor></app-uitbetalen-ddwv-crew-editor>

<div class="dataContent" *ngIf="leden && rooster">
    <div class="roosterTabel">
        <table class="table">
            <thead>
            <tr>
                <th scope="col"></th>
                <th scope="col" class="DagBreedte">Dag</th>
                <th scope="col"
                    *ngIf="(tonen.toonDienst[configService.OCHTEND_DDI_TYPE_ID] || tonen.toonDienst[configService.MIDDAG_DDI_TYPE_ID]) &&  tonen.Instructeurs && tonen.toonClubDDWV !==2"
                    [style]="KolomBreedte()">DDI
                </th>
                <th scope="col"
                    *ngIf="(tonen.toonDienst[configService.OCHTEND_INSTRUCTEUR_TYPE_ID] || tonen.toonDienst[configService.MIDDAG_INSTRUCTEUR_TYPE_ID])  && tonen.Instructeurs && tonen.toonClubDDWV !==2"
                    [style]="KolomBreedte()">
                    Instructeur
                </th>
                <th scope="col"
                    *ngIf="(tonen.toonDienst[configService.OCHTEND_STARTLEIDER_TYPE_ID] || tonen.toonDienst[configService.OCHTEND_LIERIST_TYPE_ID])  && (tonen.Startleiders || tonen.DDWV)"
                    [style]="KolomBreedte()">Startleider
                </th>
                <th scope="col"
                    *ngIf="(tonen.toonDienst[configService.OCHTEND_STARTLEIDER_IO_TYPE_ID] || tonen.toonDienst[configService.MIDDAG_STARTLEIDER_IO_TYPE_ID])  &&  tonen.Startleiders && tonen.toonClubDDWV !==2"
                    [style]="KolomBreedte()">
                    Startleider 2
                </th>
                <th scope="col"
                    *ngIf="(tonen.toonDienst[configService.OCHTEND_LIERIST_TYPE_ID] || tonen.toonDienst[configService.MIDDAG_LIERIST_TYPE_ID])  && (tonen.Lieristen || tonen.DDWV)"
                    [style]="KolomBreedte()">
                    Lierist
                </th>
                <th scope="col"
                    *ngIf="(tonen.toonDienst[configService.OCHTEND_HULPLIERIST_TYPE_ID] || tonen.toonDienst[configService.MIDDAG_HULPLIERIST_TYPE_ID])  && tonen.LIO && tonen.toonClubDDWV !==2"
                    [style]="KolomBreedte()">Hulplierist
                </th>
                <th scope="col"
                    *ngIf="(tonen.toonDienst[configService.GASTEN_VLIEGER1_TYPE_ID] || tonen.toonDienst[configService.GASTEN_VLIEGER2_TYPE_ID])  && tonen.GastenVliegers  && tonen.toonClubDDWV !==2"
                    [style]="KolomBreedte()">
                    Gastenvlieger
                </th>
                <th scope="col"
                    *ngIf="(tonen.toonDienst[configService.SLEEPVLIEGER_TYPE_ID])  && tonen.Sleepvliegers"
                    [style]="KolomBreedte()">
                    Sleepvlieger
                </th>
                <th *ngIf="tonen.toonClubDDWV ===2" [style]="KolomBreedte(2)">
                    Aantallen
                </th>
                <th scope="col" id="headerOpmerkingen">Opmerkingen</th>
            </tr>
            </thead>
            <tbody>

            <tr *ngFor="let dagInRooster of rooster;let i = index">
                <td class="WeekdagKolom" [ngClass]="DagVanDeWeek(dagInRooster.DATUM)">
                    <div class="rotation-wrapper">
                        <div class="dayOfTheWeek">
                            {{DagVanDeWeek(dagInRooster.DATUM)}}
                        </div>
                    </div>
                </td>
                <td class="DatumKolom">
                    <div class="d-flex dagInfo row m-0">
                        <div class="p-0">
                            <div class="text-nowrap fw-bold">
                                {{dagInRooster.DATUM | date: 'dd-MM-yyyy'}}
                            </div>
                            <div *ngIf="ddwvActief">
                                <input type="checkbox" class="form-check-inline" [id]="'DDWV' + i"
                                       [name]="'DDWV' + i"
                                       [(ngModel)]="dagInRooster.DDWV"
                                       (ngModelChange)="opslaanRooster(dagInRooster.DATUM)"
                                       [disabled]="!magWijzigen && !isCIMT && !isBeheerderDDWV">
                                <label [for]="'DDWV' + i" class="form-check-label">DDWV</label>
                            </div>
                            <div class="text-nowrap">
                                <input type="checkbox" class="form-check-inline"
                                       [id]="'Clubbedrijf' + i"
                                       [name]="'Clubbedrijf' + i"
                                       [(ngModel)]="dagInRooster.CLUB_BEDRIJF"
                                       (ngModelChange)="opslaanRooster(dagInRooster.DATUM)"
                                       [disabled]="!magWijzigen && !isCIMT! && !isBeheerderDDWV">
                                <label [for]="'Clubbedrijf' + i"
                                       class="labelClub form-check-label">Club
                                    bedrijf</label>
                            </div>
                        </div>
                    </div>
                </td>

                <td *ngIf="(tonen.toonDienst[configService.OCHTEND_DDI_TYPE_ID] ||
                            tonen.toonDienst[configService.MIDDAG_DDI_TYPE_ID]) && tonen.Instructeurs && tonen.toonClubDDWV !==2">
                    <div class="d-flex"
                         *ngIf="dagInRooster.CLUB_BEDRIJF && tonen.toonDienst[configService.OCHTEND_DDI_TYPE_ID]">
                        <div
                                class="drop-container" [ngClass]="lidInRoosterClass(dagInRooster.Diensten[configService.OCHTEND_DDI_TYPE_ID])"

                                cdkDropList
                                [id]="dagInRooster.DATUM + ',' + configService.OCHTEND_DDI_TYPE_ID"
                                (cdkDropListDropped)="onDropInRooster($event, dagInRooster, configService.OCHTEND_DDI_TYPE_ID);"
                                [cdkDropListData]="dagInRooster"
                                [cdkDropListEnterPredicate]="instructeurEvaluatie.bind(this, dagInRooster.DATUM, configService.OCHTEND_DDI_TYPE_ID)">
                            <div cdkDrag [cdkDragDisabled]="dragDisabled">
                                {{ (dagInRooster.Diensten[configService.OCHTEND_DDI_TYPE_ID]) ? dagInRooster.Diensten[configService.OCHTEND_DDI_TYPE_ID].NAAM : "" }}
                            </div>
                        </div>
                        <div *ngIf="zelfIndelen(configService.OCHTEND_DDI_TYPE_ID, dagInRooster.DATUM) && !dagInRooster.Diensten[configService.OCHTEND_DDI_TYPE_ID]"
                             (click)="toekennenDienst(dagInRooster, configService.OCHTEND_DDI_TYPE_ID, mijnID, mijnNaam)">
                            <ng-template *ngTemplateOutlet="assign"></ng-template>
                        </div>
                        <div *ngIf="magVerwijderen(dagInRooster.Diensten[configService.OCHTEND_DDI_TYPE_ID])"
                             (click)="verwijderDienst(dagInRooster, configService.OCHTEND_DDI_TYPE_ID)">
                            <ng-template *ngTemplateOutlet="reset"></ng-template>
                        </div>
                    </div>
                    <div class="d-flex"
                         *ngIf="dagInRooster.CLUB_BEDRIJF && tonen.toonDienst[configService.MIDDAG_DDI_TYPE_ID]">
                        <div
                                class="drop-container" [ngClass]="lidInRoosterClass(dagInRooster.Diensten[configService.MIDDAG_DDI_TYPE_ID])"

                                cdkDropList
                                [id]="dagInRooster.DATUM + ',' + configService.MIDDAG_DDI_TYPE_ID"
                                (cdkDropListDropped)="onDropInRooster($event, dagInRooster, configService.MIDDAG_DDI_TYPE_ID);"
                                [cdkDropListData]="dagInRooster"
                                [cdkDropListEnterPredicate]="instructeurEvaluatie.bind(this, dagInRooster.DATUM, configService.MIDDAG_DDI_TYPE_ID)">
                            <div cdkDrag [cdkDragDisabled]="dragDisabled">
                                {{ (dagInRooster.Diensten[configService.MIDDAG_DDI_TYPE_ID]) ? dagInRooster.Diensten[configService.MIDDAG_DDI_TYPE_ID].NAAM : "" }}
                            </div>
                        </div>
                        <div *ngIf="zelfIndelen(configService.MIDDAG_DDI_TYPE_ID, dagInRooster.DATUM) && !dagInRooster.Diensten[configService.MIDDAG_DDI_TYPE_ID]"
                             (click)="toekennenDienst(dagInRooster, configService.MIDDAG_DDI_TYPE_ID, mijnID, mijnNaam)">
                            <ng-template *ngTemplateOutlet="assign"></ng-template>
                        </div>
                        <div *ngIf="magVerwijderen(dagInRooster.Diensten[configService.MIDDAG_DDI_TYPE_ID])"
                             (click)="verwijderDienst(dagInRooster, configService.MIDDAG_DDI_TYPE_ID)">
                            <ng-template *ngTemplateOutlet="reset"></ng-template>
                        </div>
                    </div>
                </td>
                <td *ngIf="(tonen.toonDienst[configService.OCHTEND_INSTRUCTEUR_TYPE_ID] ||
                            tonen.toonDienst[configService.MIDDAG_INSTRUCTEUR_TYPE_ID]) && tonen.Instructeurs && tonen.toonClubDDWV !==2">
                    <div class="d-flex"
                         *ngIf="dagInRooster.CLUB_BEDRIJF && tonen.toonDienst[configService.OCHTEND_INSTRUCTEUR_TYPE_ID]">
                        <div
                                class="drop-container" [ngClass]="lidInRoosterClass(dagInRooster.Diensten[configService.OCHTEND_INSTRUCTEUR_TYPE_ID])"

                                cdkDropList
                                [id]="dagInRooster.DATUM + ',' + configService.OCHTEND_INSTRUCTEUR_TYPE_ID"
                                (cdkDropListDropped)="onDropInRooster($event, dagInRooster, configService.OCHTEND_INSTRUCTEUR_TYPE_ID);"
                                [cdkDropListData]="dagInRooster"
                                [cdkDropListEnterPredicate]="instructeurEvaluatie.bind(this, dagInRooster.DATUM, configService.OCHTEND_INSTRUCTEUR_TYPE_ID)">
                            <div cdkDrag [cdkDragDisabled]="dragDisabled">
                                {{ (dagInRooster.Diensten[configService.OCHTEND_INSTRUCTEUR_TYPE_ID]) ? dagInRooster.Diensten[configService.OCHTEND_INSTRUCTEUR_TYPE_ID].NAAM : "" }}
                            </div>
                        </div>
                        <div *ngIf="zelfIndelen(configService.OCHTEND_INSTRUCTEUR_TYPE_ID, dagInRooster.DATUM) && !dagInRooster.Diensten[configService.OCHTEND_INSTRUCTEUR_TYPE_ID]"
                             (click)="toekennenDienst(dagInRooster, configService.OCHTEND_INSTRUCTEUR_TYPE_ID, mijnID, mijnNaam)">
                            <ng-template *ngTemplateOutlet="assign"></ng-template>
                        </div>
                        <div *ngIf="magVerwijderen(dagInRooster.Diensten[configService.OCHTEND_INSTRUCTEUR_TYPE_ID])"
                             (click)="verwijderDienst(dagInRooster, configService.OCHTEND_INSTRUCTEUR_TYPE_ID)">
                            <ng-template *ngTemplateOutlet="reset"></ng-template>
                        </div>
                    </div>
                    <div class="d-flex"
                         *ngIf="dagInRooster.CLUB_BEDRIJF && tonen.toonDienst[configService.MIDDAG_INSTRUCTEUR_TYPE_ID]">
                        <div
                                class="drop-container" [ngClass]="lidInRoosterClass(dagInRooster.Diensten[configService.MIDDAG_INSTRUCTEUR_TYPE_ID])"

                                cdkDropList
                                [id]="dagInRooster.DATUM + ',' + configService.MIDDAG_INSTRUCTEUR_TYPE_ID"
                                (cdkDropListDropped)="onDropInRooster($event, dagInRooster, configService.MIDDAG_INSTRUCTEUR_TYPE_ID);"
                                [cdkDropListData]="dagInRooster"
                                [cdkDropListEnterPredicate]="instructeurEvaluatie.bind(this, dagInRooster.DATUM, configService.MIDDAG_INSTRUCTEUR_TYPE_ID)">
                            <div cdkDrag [cdkDragDisabled]="dragDisabled">
                                {{ (dagInRooster.Diensten[configService.MIDDAG_INSTRUCTEUR_TYPE_ID]) ? dagInRooster.Diensten[configService.MIDDAG_INSTRUCTEUR_TYPE_ID].NAAM : "" }}
                            </div>
                        </div>
                        <div *ngIf="zelfIndelen(configService.MIDDAG_INSTRUCTEUR_TYPE_ID, dagInRooster.DATUM) && !dagInRooster.Diensten[configService.MIDDAG_INSTRUCTEUR_TYPE_ID]"
                             (click)="toekennenDienst(dagInRooster, configService.MIDDAG_INSTRUCTEUR_TYPE_ID, mijnID, mijnNaam)">
                            <ng-template *ngTemplateOutlet="assign"></ng-template>
                        </div>
                        <div *ngIf="magVerwijderen(dagInRooster.Diensten[configService.MIDDAG_INSTRUCTEUR_TYPE_ID])"
                             (click)="verwijderDienst(dagInRooster, configService.MIDDAG_INSTRUCTEUR_TYPE_ID)">
                            <ng-template *ngTemplateOutlet="reset"></ng-template>
                        </div>
                    </div>
                </td>
                <td *ngIf="(tonen.toonDienst[configService.OCHTEND_STARTLEIDER_TYPE_ID] ||
                            tonen.toonDienst[configService.MIDDAG_STARTLEIDER_TYPE_ID]) && (tonen.Startleiders || tonen.DDWV) && tonen.toonDienst[configService.OCHTEND_STARTLEIDER_TYPE_ID]">
                    <div class="d-flex" *ngIf="dagInRooster.CLUB_BEDRIJF || dagInRooster.DDWV">
                        <div
                                class="drop-container" [ngClass]="lidInRoosterClass(dagInRooster.Diensten[configService.OCHTEND_STARTLEIDER_TYPE_ID])"

                                cdkDropList
                                [id]="dagInRooster.DATUM + ',' + configService.OCHTEND_STARTLEIDER_TYPE_ID"
                                (cdkDropListDropped)="onDropInRooster($event, dagInRooster, configService.OCHTEND_STARTLEIDER_TYPE_ID);"
                                [cdkDropListData]="dagInRooster"
                                [cdkDropListEnterPredicate]="startleiderEvaluatie.bind(this, dagInRooster.DATUM, configService.OCHTEND_STARTLEIDER_TYPE_ID)">
                            <div cdkDrag [cdkDragDisabled]="dragDisabled">
                                {{ (dagInRooster.Diensten[configService.OCHTEND_STARTLEIDER_TYPE_ID]) ? dagInRooster.Diensten[configService.OCHTEND_STARTLEIDER_TYPE_ID].NAAM : "" }}
                            </div>
                        </div>
                        <div *ngIf="((zelfIndelen(configService.OCHTEND_STARTLEIDER_TYPE_ID, dagInRooster.DATUM)) || (isDDWVCrew && dagInRooster.DDWV && sharedService.datumInToekomst(dagInRooster.DATUM)))  && !dagInRooster.Diensten[configService.OCHTEND_STARTLEIDER_TYPE_ID]"
                             (click)="toekennenDienst(dagInRooster, configService.OCHTEND_STARTLEIDER_TYPE_ID, mijnID, mijnNaam)">
                            <ng-template *ngTemplateOutlet="assign"></ng-template>
                        </div>
                        <div *ngIf="magVerwijderen(dagInRooster.Diensten[configService.OCHTEND_STARTLEIDER_TYPE_ID])"
                             (click)="verwijderDienst(dagInRooster, configService.OCHTEND_STARTLEIDER_TYPE_ID)">
                            <ng-template *ngTemplateOutlet="reset"></ng-template>
                        </div>
                    </div>
                    <div class="d-flex"
                         *ngIf="dagInRooster.CLUB_BEDRIJF  && tonen.toonDienst[configService.MIDDAG_STARTLEIDER_TYPE_ID]">
                        <div
                                class="drop-container" [ngClass]="lidInRoosterClass(dagInRooster.Diensten[configService.MIDDAG_STARTLEIDER_TYPE_ID])"

                                cdkDropList
                                [id]="dagInRooster.DATUM + ',' + configService.MIDDAG_STARTLEIDER_TYPE_ID"
                                (cdkDropListDropped)="onDropInRooster($event, dagInRooster, configService.MIDDAG_STARTLEIDER_TYPE_ID);"
                                [cdkDropListData]="dagInRooster"
                                [cdkDropListEnterPredicate]="startleiderEvaluatie.bind(this, dagInRooster.DATUM, configService.MIDDAG_STARTLEIDER_TYPE_ID)">
                            <div cdkDrag [cdkDragDisabled]="dragDisabled">
                                {{ (dagInRooster.Diensten[configService.MIDDAG_STARTLEIDER_TYPE_ID]) ? dagInRooster.Diensten[configService.MIDDAG_STARTLEIDER_TYPE_ID].NAAM : "" }}
                            </div>
                        </div>
                        <div *ngIf="zelfIndelen(configService.MIDDAG_STARTLEIDER_TYPE_ID, dagInRooster.DATUM) && !dagInRooster.Diensten[configService.MIDDAG_STARTLEIDER_TYPE_ID]"
                             (click)="toekennenDienst(dagInRooster, configService.MIDDAG_STARTLEIDER_TYPE_ID, mijnID, mijnNaam)">
                            <ng-template *ngTemplateOutlet="assign"></ng-template>
                        </div>
                        <div *ngIf="magVerwijderen(dagInRooster.Diensten[configService.MIDDAG_STARTLEIDER_TYPE_ID])"
                             (click)="verwijderDienst(dagInRooster, configService.MIDDAG_STARTLEIDER_TYPE_ID)">
                            <ng-template *ngTemplateOutlet="reset"></ng-template>
                        </div>
                    </div>
                </td>

                <td *ngIf="(tonen.toonDienst[configService.OCHTEND_STARTLEIDER_IO_TYPE_ID] ||
                            tonen.toonDienst[configService.MIDDAG_STARTLEIDER_IO_TYPE_ID]) && tonen.Startleiders && tonen.toonClubDDWV !==2">
                    <div class="d-flex"
                         *ngIf="dagInRooster.CLUB_BEDRIJF &&  tonen.toonDienst[configService.OCHTEND_STARTLEIDER_IO_TYPE_ID]">
                        <div
                                class="drop-container" [ngClass]="lidInRoosterClass(dagInRooster.Diensten[configService.OCHTEND_STARTLEIDER_IO_TYPE_ID])"

                                cdkDropList
                                [id]="dagInRooster.DATUM + ',' + configService.OCHTEND_STARTLEIDER_IO_TYPE_ID"
                                (cdkDropListDropped)="onDropInRooster($event, dagInRooster, configService.OCHTEND_STARTLEIDER_IO_TYPE_ID);"
                                [cdkDropListData]="dagInRooster"
                                [cdkDropListEnterPredicate]="startleiderEvaluatie.bind(this, dagInRooster.DATUM, configService.OCHTEND_STARTLEIDER_IO_TYPE_ID)">
                            <div cdkDrag [cdkDragDisabled]="dragDisabled">
                                {{ (dagInRooster.Diensten[configService.OCHTEND_STARTLEIDER_IO_TYPE_ID]) ? dagInRooster.Diensten[configService.OCHTEND_STARTLEIDER_IO_TYPE_ID].NAAM : "" }}
                            </div>
                        </div>
                        <div *ngIf="(zelfIndelen(configService.OCHTEND_STARTLEIDER_IO_TYPE_ID, dagInRooster.DATUM))  && !dagInRooster.Diensten[configService.OCHTEND_STARTLEIDER_IO_TYPE_ID]"
                             (click)="toekennenDienst(dagInRooster, configService.OCHTEND_STARTLEIDER_IO_TYPE_ID, mijnID, mijnNaam)">
                            <ng-template *ngTemplateOutlet="assign"></ng-template>
                        </div>
                        <div *ngIf="magVerwijderen(dagInRooster.Diensten[configService.OCHTEND_STARTLEIDER_IO_TYPE_ID])"
                             (click)="verwijderDienst(dagInRooster, configService.OCHTEND_STARTLEIDER_IO_TYPE_ID)">
                            <ng-template *ngTemplateOutlet="reset"></ng-template>
                        </div>
                    </div>
                    <div class="d-flex"
                         *ngIf="dagInRooster.CLUB_BEDRIJF && tonen.toonDienst[configService.MIDDAG_STARTLEIDER_IO_TYPE_ID]">
                        <div
                                class="drop-container" [ngClass]="lidInRoosterClass(dagInRooster.Diensten[configService.MIDDAG_STARTLEIDER_IO_TYPE_ID])"

                                cdkDropList
                                [id]="dagInRooster.DATUM + ',' + configService.MIDDAG_STARTLEIDER_IO_TYPE_ID"
                                (cdkDropListDropped)="onDropInRooster($event, dagInRooster, configService.MIDDAG_STARTLEIDER_IO_TYPE_ID);"
                                [cdkDropListData]="dagInRooster"
                                [cdkDropListEnterPredicate]="startleiderEvaluatie.bind(this, dagInRooster.DATUM, configService.MIDDAG_STARTLEIDER_IO_TYPE_ID)">
                            <div cdkDrag [cdkDragDisabled]="dragDisabled">
                                {{ (dagInRooster.Diensten[configService.MIDDAG_STARTLEIDER_IO_TYPE_ID]) ? dagInRooster.Diensten[configService.MIDDAG_STARTLEIDER_IO_TYPE_ID].NAAM : "" }}
                            </div>
                        </div>
                        <div *ngIf="zelfIndelen(configService.MIDDAG_STARTLEIDER_IO_TYPE_ID, dagInRooster.DATUM) && !dagInRooster.Diensten[configService.MIDDAG_STARTLEIDER_IO_TYPE_ID]"
                             (click)="toekennenDienst(dagInRooster, configService.MIDDAG_STARTLEIDER_IO_TYPE_ID, mijnID, mijnNaam)">
                            <ng-template *ngTemplateOutlet="assign"></ng-template>
                        </div>
                        <div *ngIf="magVerwijderen(dagInRooster.Diensten[configService.MIDDAG_STARTLEIDER_IO_TYPE_ID])"
                             (click)="verwijderDienst(dagInRooster, configService.MIDDAG_STARTLEIDER_IO_TYPE_ID)">
                            <ng-template *ngTemplateOutlet="reset"></ng-template>
                        </div>
                    </div>
                </td>

                <td *ngIf="(tonen.toonDienst[configService.OCHTEND_LIERIST_TYPE_ID] ||
                            tonen.toonDienst[configService.MIDDAG_LIERIST_TYPE_ID]) && (tonen.Lieristen || tonen.DDWV)">
                    <div class="d-flex" *ngIf="(dagInRooster.CLUB_BEDRIJF || dagInRooster.DDWV) &&  tonen.toonDienst[configService.OCHTEND_LIERIST_TYPE_ID]">
                        <div
                                class="drop-container" [ngClass]="lidInRoosterClass(dagInRooster.Diensten[configService.OCHTEND_LIERIST_TYPE_ID])"

                                cdkDropList
                                [id]="dagInRooster.DATUM + ',' + configService.OCHTEND_LIERIST_TYPE_ID"
                                (cdkDropListDropped)="onDropInRooster($event, dagInRooster, configService.OCHTEND_LIERIST_TYPE_ID);"
                                [cdkDropListData]="dagInRooster"
                                [cdkDropListEnterPredicate]="lieristEvaluatie.bind(this, dagInRooster.DATUM, configService.OCHTEND_LIERIST_TYPE_ID)">
                            <div cdkDrag [cdkDragDisabled]="dragDisabled">
                                {{ (dagInRooster.Diensten[configService.OCHTEND_LIERIST_TYPE_ID]) ? dagInRooster.Diensten[configService.OCHTEND_LIERIST_TYPE_ID].NAAM : "" }}
                            </div>
                        </div>
                        <div *ngIf="((zelfIndelen(configService.OCHTEND_LIERIST_TYPE_ID, dagInRooster.DATUM)) || (isDDWVCrew && dagInRooster.DDWV && sharedService.datumInToekomst(dagInRooster.DATUM))) && !dagInRooster.Diensten[configService.OCHTEND_LIERIST_TYPE_ID]"
                             (click)="toekennenDienst(dagInRooster, configService.OCHTEND_LIERIST_TYPE_ID, mijnID, mijnNaam)">
                            <ng-template *ngTemplateOutlet="assign"></ng-template>
                        </div>
                        <div *ngIf="magVerwijderen(dagInRooster.Diensten[configService.OCHTEND_LIERIST_TYPE_ID])"
                             (click)="verwijderDienst(dagInRooster, configService.OCHTEND_LIERIST_TYPE_ID)">
                            <ng-template *ngTemplateOutlet="reset"></ng-template>
                        </div>
                    </div>
                    <div class="d-flex"
                         *ngIf="dagInRooster.CLUB_BEDRIJF  && tonen.toonDienst[configService.MIDDAG_LIERIST_TYPE_ID]">
                        <div
                                class="drop-container" [ngClass]="lidInRoosterClass(dagInRooster.Diensten[configService.MIDDAG_LIERIST_TYPE_ID])"

                                cdkDropList
                                [id]="dagInRooster.DATUM + ',' + configService.MIDDAG_LIERIST_TYPE_ID"
                                (cdkDropListDropped)="onDropInRooster($event, dagInRooster, configService.MIDDAG_LIERIST_TYPE_ID);"
                                [cdkDropListData]="dagInRooster"
                                [cdkDropListEnterPredicate]="lieristEvaluatie.bind(this, dagInRooster.DATUM, configService.MIDDAG_LIERIST_TYPE_ID)">
                            <div cdkDrag [cdkDragDisabled]="dragDisabled">
                                {{ (dagInRooster.Diensten[configService.MIDDAG_LIERIST_TYPE_ID]) ? dagInRooster.Diensten[configService.MIDDAG_LIERIST_TYPE_ID].NAAM : "" }}
                            </div>
                        </div>
                        <div *ngIf="zelfIndelen(configService.MIDDAG_LIERIST_TYPE_ID, dagInRooster.DATUM) && !dagInRooster.Diensten[configService.MIDDAG_LIERIST_TYPE_ID]"
                             (click)="toekennenDienst(dagInRooster, configService.MIDDAG_LIERIST_TYPE_ID, mijnID, mijnNaam)">
                            <ng-template *ngTemplateOutlet="assign"></ng-template>
                        </div>
                        <div *ngIf="magVerwijderen(dagInRooster.Diensten[configService.MIDDAG_LIERIST_TYPE_ID])"
                             (click)="verwijderDienst(dagInRooster, configService.MIDDAG_LIERIST_TYPE_ID)">
                            <ng-template *ngTemplateOutlet="reset"></ng-template>
                        </div>
                    </div>
                </td>
                <td *ngIf="(tonen.toonDienst[configService.OCHTEND_HULPLIERIST_TYPE_ID] ||
                            tonen.toonDienst[configService.MIDDAG_HULPLIERIST_TYPE_ID]) && tonen.LIO && tonen.toonClubDDWV !==2">
                    <div class="d-flex"
                         *ngIf="dagInRooster.CLUB_BEDRIJF && tonen.toonDienst[configService.OCHTEND_HULPLIERIST_TYPE_ID]">
                        <div
                                class="drop-container" [ngClass]="lidInRoosterClass(dagInRooster.Diensten[configService.OCHTEND_HULPLIERIST_TYPE_ID])"

                                cdkDropList
                                [id]="dagInRooster.DATUM + ',' + configService.OCHTEND_HULPLIERIST_TYPE_ID"
                                (cdkDropListDropped)="onDropInRooster($event, dagInRooster, configService.OCHTEND_HULPLIERIST_TYPE_ID);"
                                [cdkDropListData]="dagInRooster"
                                [cdkDropListEnterPredicate]="lioEvaluatie.bind(this, dagInRooster.DATUM, configService.OCHTEND_HULPLIERIST_TYPE_ID)">
                            <div cdkDrag [cdkDragDisabled]="dragDisabled">
                                {{ (dagInRooster.Diensten[configService.OCHTEND_HULPLIERIST_TYPE_ID]) ? dagInRooster.Diensten[configService.OCHTEND_HULPLIERIST_TYPE_ID].NAAM : "" }}
                            </div>
                        </div>
                        <div *ngIf="zelfIndelen(configService.OCHTEND_HULPLIERIST_TYPE_ID, dagInRooster.DATUM) && !dagInRooster.Diensten[configService.OCHTEND_HULPLIERIST_TYPE_ID]"
                             (click)="toekennenDienst(dagInRooster, configService.OCHTEND_HULPLIERIST_TYPE_ID, mijnID, mijnNaam)">
                            <ng-template *ngTemplateOutlet="assign"></ng-template>
                        </div>
                        <div *ngIf="magVerwijderen(dagInRooster.Diensten[configService.OCHTEND_HULPLIERIST_TYPE_ID])"
                             (click)="verwijderDienst(dagInRooster, configService.OCHTEND_HULPLIERIST_TYPE_ID)">
                            <ng-template *ngTemplateOutlet="reset"></ng-template>
                        </div>
                    </div>
                    <div class="d-flex"
                         *ngIf="dagInRooster.CLUB_BEDRIJF && tonen.toonDienst[configService.MIDDAG_HULPLIERIST_TYPE_ID]">
                        <div
                                class="drop-container" [ngClass]="lidInRoosterClass(dagInRooster.Diensten[configService.MIDDAG_HULPLIERIST_TYPE_ID])"

                                cdkDropList
                                [id]="dagInRooster.DATUM + ',' + configService.MIDDAG_HULPLIERIST_TYPE_ID"
                                (cdkDropListDropped)="onDropInRooster($event, dagInRooster, configService.MIDDAG_HULPLIERIST_TYPE_ID);"
                                [cdkDropListData]="dagInRooster"
                                [cdkDropListEnterPredicate]="lioEvaluatie.bind(this, dagInRooster.DATUM, configService.MIDDAG_HULPLIERIST_TYPE_ID)">
                            <div cdkDrag [cdkDragDisabled]="dragDisabled">
                                {{ (dagInRooster.Diensten[configService.MIDDAG_HULPLIERIST_TYPE_ID]) ? dagInRooster.Diensten[configService.MIDDAG_HULPLIERIST_TYPE_ID].NAAM : "" }}
                            </div>
                        </div>
                        <div *ngIf="zelfIndelen(configService.MIDDAG_HULPLIERIST_TYPE_ID, dagInRooster.DATUM) && !dagInRooster.Diensten[configService.MIDDAG_HULPLIERIST_TYPE_ID]"
                             (click)="toekennenDienst(dagInRooster, configService.MIDDAG_HULPLIERIST_TYPE_ID, mijnID, mijnNaam)">
                            <ng-template *ngTemplateOutlet="assign"></ng-template>
                        </div>
                        <div *ngIf="magVerwijderen(dagInRooster.Diensten[configService.MIDDAG_HULPLIERIST_TYPE_ID])"
                             (click)="verwijderDienst(dagInRooster, configService.MIDDAG_HULPLIERIST_TYPE_ID)">
                            <ng-template *ngTemplateOutlet="reset"></ng-template>
                        </div>
                    </div>
                </td>

                <td *ngIf="(tonen.toonDienst[configService.GASTEN_VLIEGER1_TYPE_ID] ||
                            tonen.toonDienst[configService.GASTEN_VLIEGER2_TYPE_ID]) && tonen.GastenVliegers && tonen.toonClubDDWV !==2">
                    <div class="d-flex"
                         *ngIf="dagInRooster.CLUB_BEDRIJF && tonen.toonDienst[configService.GASTEN_VLIEGER1_TYPE_ID]">
                        <div
                                class="drop-container" [ngClass]="lidInRoosterClass(dagInRooster.Diensten[configService.GASTEN_VLIEGER1_TYPE_ID])"

                                cdkDropList
                                [id]="dagInRooster.DATUM + ',' + configService.GASTEN_VLIEGER1_TYPE_ID"
                                (cdkDropListDropped)="onDropInRooster($event, dagInRooster, configService.GASTEN_VLIEGER1_TYPE_ID);"
                                [cdkDropListData]="dagInRooster"
                                [cdkDropListEnterPredicate]="gastVliegerEvaluatie.bind(this, dagInRooster.DATUM, configService.GASTEN_VLIEGER1_TYPE_ID)">
                            <div cdkDrag [cdkDragDisabled]="dragDisabled">
                                {{ (dagInRooster.Diensten[configService.GASTEN_VLIEGER1_TYPE_ID]) ? dagInRooster.Diensten[configService.GASTEN_VLIEGER1_TYPE_ID].NAAM : "" }}
                            </div>
                        </div>
                        <div *ngIf="zelfIndelen(configService.GASTEN_VLIEGER1_TYPE_ID, dagInRooster.DATUM) && !dagInRooster.Diensten[configService.GASTEN_VLIEGER1_TYPE_ID]"
                             (click)="toekennenDienst(dagInRooster, configService.GASTEN_VLIEGER1_TYPE_ID, mijnID, mijnNaam)">
                            <ng-template *ngTemplateOutlet="assign"></ng-template>
                        </div>
                        <div *ngIf="magVerwijderen(dagInRooster.Diensten[configService.GASTEN_VLIEGER1_TYPE_ID])"
                             (click)="verwijderDienst(dagInRooster, configService.GASTEN_VLIEGER1_TYPE_ID)">
                            <ng-template *ngTemplateOutlet="reset"></ng-template>
                        </div>
                    </div>
                    <div class="d-flex"
                         *ngIf="dagInRooster.CLUB_BEDRIJF && tonen.toonDienst[configService.GASTEN_VLIEGER2_TYPE_ID]">
                        <div
                                class="drop-container" [ngClass]="lidInRoosterClass(dagInRooster.Diensten[configService.GASTEN_VLIEGER2_TYPE_ID])"

                                cdkDropList
                                [id]="dagInRooster.DATUM + ',' + configService.GASTEN_VLIEGER2_TYPE_ID"
                                (cdkDropListDropped)="onDropInRooster($event, dagInRooster, configService.GASTEN_VLIEGER2_TYPE_ID);"
                                [cdkDropListData]="dagInRooster"
                                [cdkDropListEnterPredicate]="gastVliegerEvaluatie.bind(this, dagInRooster.DATUM, configService.GASTEN_VLIEGER2_TYPE_ID)">
                            <div cdkDrag [cdkDragDisabled]="dragDisabled">
                                {{ (dagInRooster.Diensten[configService.GASTEN_VLIEGER2_TYPE_ID]) ? dagInRooster.Diensten[configService.GASTEN_VLIEGER2_TYPE_ID].NAAM : "" }}
                            </div>
                        </div>
                        <div *ngIf="zelfIndelen(configService.GASTEN_VLIEGER2_TYPE_ID, dagInRooster.DATUM) && !dagInRooster.Diensten[configService.GASTEN_VLIEGER2_TYPE_ID]"
                             (click)="toekennenDienst(dagInRooster, configService.GASTEN_VLIEGER2_TYPE_ID, mijnID, mijnNaam)">
                            <ng-template *ngTemplateOutlet="assign"></ng-template>
                        </div>
                        <div *ngIf="magVerwijderen(dagInRooster.Diensten[configService.GASTEN_VLIEGER2_TYPE_ID])"
                             (click)="verwijderDienst(dagInRooster, configService.GASTEN_VLIEGER2_TYPE_ID)">
                            <ng-template *ngTemplateOutlet="reset"></ng-template>
                        </div>
                    </div>
                </td>

                <td *ngIf="tonen.toonDienst[configService.SLEEPVLIEGER_TYPE_ID]  && tonen.Sleepvliegers">
                    <div class="d-flex" *ngIf="dagInRooster.CLUB_BEDRIJF || dagInRooster.DDWV">
                        <div
                                class="drop-container" [ngClass]="lidInRoosterClass(dagInRooster.Diensten[configService.SLEEPVLIEGER_TYPE_ID])"

                                cdkDropList
                                [id]="dagInRooster.DATUM + ',' + configService.SLEEPVLIEGER_TYPE_ID"
                                (cdkDropListDropped)="onDropInRooster($event, dagInRooster, configService.SLEEPVLIEGER_TYPE_ID);"
                                [cdkDropListData]="dagInRooster"
                                [cdkDropListEnterPredicate]="sleepvliegerEvaluatie.bind(this, dagInRooster.DATUM, configService.SLEEPVLIEGER_TYPE_ID)">
                            <div cdkDrag [cdkDragDisabled]="dragDisabled">
                                {{ (dagInRooster.Diensten[configService.SLEEPVLIEGER_TYPE_ID]) ? dagInRooster.Diensten[configService.SLEEPVLIEGER_TYPE_ID].NAAM : "" }}
                            </div>
                        </div>
                        <div *ngIf="zelfIndelen(configService.SLEEPVLIEGER_TYPE_ID, dagInRooster.DATUM) && !dagInRooster.Diensten[configService.SLEEPVLIEGER_TYPE_ID]"
                             (click)="toekennenDienst(dagInRooster, configService.SLEEPVLIEGER_TYPE_ID, mijnID, mijnNaam)">
                            <ng-template *ngTemplateOutlet="assign"></ng-template>
                        </div>
                        <div *ngIf="magVerwijderen(dagInRooster.Diensten[configService.SLEEPVLIEGER_TYPE_ID])"
                             (click)="verwijderDienst(dagInRooster, configService.SLEEPVLIEGER_TYPE_ID)">
                            <ng-template *ngTemplateOutlet="reset"></ng-template>
                        </div>
                    </div>
                </td>
                <td *ngIf="tonen.toonClubDDWV ===2">
                    <div *ngIf="!datumInToekomst(dagInRooster.DATUM) && dagInRooster.DDWV && !dagInRooster.CLUB_BEDRIJF && (isBeheerderDDWV || isBeheerder)" class="w-100 ms-2">
                        <app-icon-button class="toolbarBtn"
                                         tekst="Uitbetalen"
                                         iconNaam="fas EuroSign" (btnClicked)="uitbetalen.openPopup(dagInRooster)"
                                         btnColor="btn-secondary"></app-icon-button>
                    </div>
                    <div *ngIf="datumInToekomst(dagInRooster.DATUM) && dagInRooster.DDWV && !dagInRooster.CLUB_BEDRIJF" class="w-100">
                        <div class="d-flex flex-row">
                            <label class="form-label me-2">Slepen</label>
                            <input type="range" class="form-range" min="1" max="15" [(ngModel)]="dagInRooster.MIN_SLEEPSTART" (change)="opslaanRooster(dagInRooster.DATUM)" [disabled]="!magWijzigen">
                            <div class="ms-2 me-1">{{dagInRooster.MIN_SLEEPSTART}}</div>
                        </div>
                        <div class="d-flex flex-row">
                            <label class="form-label me-2">Lierstarts</label>
                            <input type="range" class="form-range" min="1" max="15" [(ngModel)]="dagInRooster.MIN_LIERSTART" (change)="opslaanRooster(dagInRooster.DATUM)" [disabled]="!magWijzigen">
                            <div class="ms-2 me-1">{{dagInRooster.MIN_LIERSTART}}</div>
                        </div>
                    </div>
                </td>
                <td>
                        <textarea
                                [id]="'OPMERKINGEN' + i"
                                [name]="'OPMERKINGEN' + i"
                                [(ngModel)]="dagInRooster.OPMERKINGEN"
                                (ngModelChange)="opslaanRooster(dagInRooster.DATUM)"
                                [disabled]="!magWijzigen && !isCIMT && !isBeheerderDDWV"
                                class="w-100 text-invoer form-control opmerkingen"
                                [rows]="2" style="resize: none"></textarea>
                </td>
            </tr>
            </tbody>
        </table>

    </div>
    <div class="kolomRechts" *ngIf="toonRechts()">
        <a aria-label="Toon jaarrooster" class="class" (click)="toonJaarRooster()"><h4>Leden</h4></a>
        <div class="expandLogboek">
            <a aria-label="Sorteer op aantal diensten" class="clickable" (click)="sorteer()">
                <fa-icon [icon]="iconSort"></fa-icon>
            </a>
        </div>
        <div
                id="LEDENLIJST"
                cdkDropList
                cdkDropListSortingDisabled
                [cdkDropListData]="leden"
                (cdkDropListDropped)="onDropInLedenlijst($event)">

            <div *ngIf="leden && leden.length == 0" class="d-flex justify-content-center">
                Geen resultaten gevonden
            </div>
            <div class="card my-1" [ngClass.lt-lg]="'mb-3'"
                 *ngFor="let lid of leden"
                 [cdkDragData]="lid" cdkDrag>
                <div *cdkDragPreview>
                    <ng-template *ngTemplateOutlet="preview; context: {$implicit: lid}"></ng-template>
                </div>

                <div *cdkDragPlaceholder>
                    {{lid.NAAM}}
                </div>
                <div class="card-body">
                    <div class="d-flex">
                        <div class="maandTotaal" data-toggle="tooltip" title="Aantal diensten deze maand" *ngIf="tonen.toonTotalen">
                            {{ lid.INGEDEELD_MAAND }}
                        </div>
                        <div class="jaarTotaal"  data-toggle="tooltip" title="Aantal diensten dit jaar"  *ngIf="tonen.toonTotalen">
                            {{ lid.INGEDEELD_JAAR | number:'2.0' }}
                        </div>

                        <div class="avatar">
                            <app-avatar [url]="lid.AVATAR"></app-avatar>
                        </div>
                        <div class="naam">
                            {{lid.NAAM}}
                            <p>
                                <span *ngIf="lid.LIERIST">Lierist </span>
                                <span *ngIf="lid.STARTLEIDER">Startleider </span>
                                <span *ngIf="lid.INSTRUCTEUR">Instructeur </span>
                                <span *ngIf="lid.SLEEPVLIEGER">Sleepvlieger </span>
                                <span *ngIf="lid.GASTENVLIEGER">Gastenvlieger </span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<ng-template #reset>
    <div class="d-flex flex-column justify-content-center h-100 text-black-50 clickable px-1">
        <fa-icon [icon]="resetIcon"></fa-icon>
    </div>
</ng-template>

<ng-template #assign>
    <div class="d-flex flex-column justify-content-center h-100 text-black-50 clickable px-1">
        <fa-icon [icon]="assignIcon"></fa-icon>
    </div>
</ng-template>

<ng-template #preview let-lid>
    <div class="card card-body">
        <h6>{{lid.NAAM}}</h6>
        <p>
            <span *ngIf="lid.LIERIST">Lierist </span>
            <span *ngIf="lid.STARTLEIDER">Startleider </span>
            <span *ngIf="lid.INSTRUCTEUR">Instructeur </span>
            <span *ngIf="lid.SLEEPVLIEGER">Sleepvlieger </span>
            <span *ngIf="lid.GASTENVLIEGER">Gastenvlieger </span>
        </p>

    </div>
</ng-template>
